<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Profile</title>
  <link
  rel="stylesheet"
  href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
  />
  <style>
    body {
      background-color: #d2d2d2;
    }
    .headerButtons {
      float: right !important;
      padding: 10px;
    }
    .header {
      background-color: #e3f2fd;
    }
    .profileDetails {
      margin-top: 20px;
      margin-bottom: 20px;
      padding: 20px;
    }
    .experienceContainer {
      margin-bottom: 20px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container-fluid">
    <div class="row header">
      <div class="col-sm-9">
        <h1 th:text="${userId} + '\'s Profile'">Profile</h1>
      </div>
      <div class="col-sm-3 headerButtons">
         <a class="btn btn-outline-danger" role="button" th:href="@{/home}"
        >Home</a
        >
        <a class="btn btn-outline-success my-2 my-sm-0" role="button" 
        th:href="@{'/view/'+${userProfile.userName}}">
      View</a>
       <a class="btn btn-outline-danger" role="button" th:href="@{/logout}"
        >Logout</a
        >
    </div>
  </div>

  <div class="row">
    <div class="col-sm-3"></div>
    <!-- Centered container Starts -->
    <div class="col-sm-6">
      <!-- Personal Details card Starts -->
      <div class="row card profileDetails">
        <form
        action="#"
        th:action="@{/updateUserDetails}"
        th:object="${userProfile}"
        method="post"
        >
        <div class="form-group">
          <label>Select your profile theme</label>
          <select th:field="*{theme}">
            <option
            th:each="i : ${#numbers.sequence(1, 3)}"
            th:value="${i}"
            th:text="${'Theme ' + i}"
            ></option>
          </select>
        </div>
        <div class="form-group">
          <label>First Name</label>
          <input class="form-control" th:field="*{firstName}" />
        </div>
        <div class="form-group">
          <label>Last Name</label>
          <input class="form-control" th:field="*{lastName}" />
        </div>
        <div class="form-group">
          <label>Email address</label>
          <input class="form-control" th:field="*{email}" />
        </div>
        <div class="form-group">
          <label>Phone</label>
          <input class="form-control" th:field="*{phone}" />
        </div>
        <div class="form-group">
          <label>Designation</label>
          <input class="form-control" th:field="*{designation}" />
        </div>
        <div class="form-group">
          <label>Summary</label>
          <textarea
          class="form-control"
          th:field="*{summary}"
          rows="4"
          ></textarea>
        </div>
        <input
        class="btn btn-outline-success profileDetailsButton"
        type="submit"
        value="Update Personal Details"
        />
      </form>
    </div>

    <!-- Exp Container starts-->
    <div class="row card experienceContainer">
      <div class="card-body">
        <h3 class="card-title">Experience</h3>
        <hr />
        <table class="table table-bordered">
          <tbody>
            <div th:each="job, stat: *{jobsList}">
              <tr>
                <td>Company</td>
                <td>
                  <div
                  class="form-control"
                  th:text="${job.company}"
                  ></div>
                </td>
              </tr>
              <tr>
                <td>Designation</td>
                <td>
                  <div
                  class="form-control"
                  th:text="${job.designation}"
                  ></div>
                </td>
              </tr>
              <tr>
                <td>Start Date</td>
                <td>
                  <div
                  class="form-control"
                  th:text="${job.startDate}"
                  ></div>
                </td>
              </tr>
              <tr>
                <td>End Date</td>
                <td>
                  <div
                  class="form-control"
                  th:text="${job.endDate}"
                  ></div>
                </td>
              </tr>
              
              <tr>
                    <td colspan="2" >Job Responsibilities</td>
                    </tr>
                    
                    
                    <tr >
                    
                     <td colspan="2">
                     <ul th:each="respo, stat: *{job.responsibilities}">
                     <li  th:text="${respo}"></li>
                     </ul>                    
                    </td>
                     
                    </tr>
                   
              
              
              <tr>
                <td>Current Job</td>
                <td>
                  <input
                  type="checkbox"
                  class="form-control"
                  th:checked="${job.currentJob}"
                  style="width: 40px"
                  disabled="disabled"/>
                </td>
              </tr>

              <tr>
                <td colspan="2" style="text-align: center;">
                  <span style="padding-left: 50px; text-align: left;">
                    <a
                    class="btn btn-outline-danger"
                    th:href="@{'./delete?type=job&index=' + ${stat.index}}"
                    >Delete</a>
                  </span>
                  
                  
                  <span style="padding-right: 50px;">
                   <a class="btn btn-outline-danger" 
                   th:href="@{'./edit/experience?type=job&index=' + ${stat.index}}">
                 Update</a>
               </span>
               
             </td>
           </tr>
         </div>
       </tbody>
     </table>
     <p><a href="./edit?add=job">Add Job</a></p>
     <hr />
     <div th:if="${pa.isClicked}" class="'row">
      <form
      action="#"
      th:action="@{/addJob}"
      th:object="${newjob}"
      method="POST"
      >
      <table class="col-sm-12 table table-bordered">
        <tr>
          <td style="width: 50%">Company Name</td>
          <td style="width: 50%">
            <input
            class="form-control"
            th:field="*{company}"
            placeholder="Company Name"
            />
          </td>
        </tr>
        <tr>
          <td style="width: 50%">Organisation Name</td>
          <td style="width: 50%">
            <input
            class="form-control"
            th:field="*{designation}"
            placeholder="Your Designation"
            />
          </td>
        </tr>
        <tr>
          <td style="width: 50%">Start Date</td>
          <td style="width: 50%">
            <input
            type="date"
            class="form-control"
            th:field="*{startDate}"
            />
          </td>
        </tr>
        <tr>
          <td style="width: 50%">End Date</td>
          <td style="width: 50%">
            <input
            type="date"
            class="form-control"
            th:field="*{endDate}"
            />
          </td>
        </tr>
        
        <tr>
          <td colspan="2">
            <p>Job Responsibilites</p>
          </td>
        </tr>
        <tr>
          <td colspan="2" style="text-align: center;">
           <textarea
           class="form-control"
           th:field="*{summary}"
           rows="4"
           placeholder="Job Responsibilities seperated by Comma"></textarea>
           
         </td>
         
       </tr>
       
       <tr>
        <td>Current Job</td>
        <td style="width: 50%">
          <input
          type="checkbox"
          class="form-control"
          th:field="*{currentJob}"
          style="width: 40px"
          />
        </td>
      </tr>
      <tr>
        <td colspan="2" style="text-align: center;">
          <input
          class="btn btn-outline-success"
          type="submit"
          value="Add Experience"
          />
        </td>
      </tr>
    </table>
  </form>
</div>
</div>
</div>
<!-- Exp Container Ends-->
<!-- Education Container Starts-->
<div class="row card experienceContainer">
  <div class="card-body">
    <h3 class="card-title">Education</h3>
    <hr />

    <table class="table table-bordered">
      <div th:each="edu, stat: *{eduList}">
        <tr>
          <td>College</td>  
          <td><div class="form-control" th:text="${edu.college}"></div></td>
        </tr>
        <tr>
          <td>Qualification</td>
          <td><div class="form-control" th:text="${edu.qualification}"></div></td>
        </tr>
        <tr>
          <td>Start Date</td>
          <td><div type="date" class="form-control" th:text="${edu.startDate}"></div></td>
        </tr>
        <tr>
          <td>End Date</td>
          <td><div type="date" class="form-control" th:text="${edu.endDate}"></div></td>
        </tr>
        
        <tr>
          <td>Summary</td>
          <td><div class="form-control" th:text="${edu.summary}"></div></td>
        </tr>
        
        <tr>
          <td colspan='2' style='text-align: center;'><a class="btn btn-outline-danger" th:href="@{'./delete?type=education&index=' + ${stat.index}}">Delete</a></td>
        </tr>
        <div>
        </table>
        



        <p><a href="./edit?add=education">Add Education</a></p>
        
        <div th:if="${pa.isaddNewEducationClicked}">

          
          <form action="#" th:action="@{/addEducation}" th:object="${newEducation}" method="POST">
            <table class="table table-bordered">
              <tr>
                <tr>
                  <td>College</td>
                  <td><input class="form-control" th:field="*{college}" placeholder="College Name"></td>
                </tr>
                <tr>
                  <td>Qualification</td><td><input class="form-control" th:field="*{qualification}" placeholder="Qualification"></td>
                </tr>
                <tr>
                  <td>Start Date</td>
                  <td><input type="date" class="form-control" th:field="*{startDate}" placeholder="Course Start Date"></td>
                </tr>
                <tr>
                  <td>End Date</td>
                  <td><input type="date" class="form-control" th:field="*{endDate}" placeholder="Course End Date"></td>
                </tr>
                
                <tr>
                  <td>Summary</td>
                  <td><input class="form-control" th:field="*{summary}"></td>
                </tr>
                
                <tr>
                  <td colspan='2' style='text-align: center;'>
                    <input class="btn btn-outline-success" type="submit" value="Add Education"/>
                  </td>
                </tr>
              </tr>
            </table>
          </form>
        </div>
      </div>
    </div>
    <!--Education Container Ends-->

    <div class="row card experienceContainer">
      <div class="card-body">
        <h3 class="card-title">Skills</h3>
        <hr />
        <table>
          <tr th:each="skill, stat: ${skillsList}">
            <td><input class="form-control" th:value="*{skill}"></td>
            <td><a th:href="@{'./delete?type=skill&index=' + ${stat.index}}"><span style="font-size:40px;color:red">&times;</span></a></td>
          </tr>
          
        </table>
        <p><a href="./edit?add=skill">Add Skill</a></p>
        <div th:if="${pa.isAddSkillClicked}">
          
          <form action="#" th:action="@{/addSkill}" method="POST">
           <table>
             <tr>
               <td>
                 <input type="text" class="form-control" th:value="${newSkill}" name="newSkill" placeholder="Your Skill">
               </td>
               <td><input class="btn btn-outline-success" type="submit" value="Add SKill"> </td>
             </tr>
           </table>
         </form>
       </div>
     </div>
   </div>
   <!-- Error Message-->
   <div th:if="${errors.size()>0}">
     <div class="alert alert-Error">
      <strong>Error! </strong> <span> Profile Update Failed</span>
    </div>
  </div>
  <div th:each="error: ${errors}">
    <div class="alert alert-warning">
      <strong>Error! </strong> <span th:text="${error}"></span>
    </div>
  </div>  

  <!-- Final Submit Button-->
  <form action="#" th:action="@{/edit}" th:object="${userProfile}" method="post">
   <input class="btn btn-success btn-block" style='margin-bottom: 50px;'type="submit" value="Update Profile">
 </form>

</div>
</div>
</div>
</body>
</html>